# 归零记录自动生成事件名称

## 🎯 功能说明

当创建或编辑归零记录时，如果**事件名称**留空，系统会自动生成名称。

### **生成格式**
```
[日期] [分类标签]
```

---

## ✨ 示例

### **示例 1：学期更新**

**输入**：
```
事件名称：（留空）
分类标签：学期更新
日期：2025/12/16
```

**自动生成**：
```
12/16 学期更新
```

---

### **示例 2：系统校准**

**输入**：
```
事件名称：（留空）
分类标签：系统校准
日期：2025/02/01
```

**自动生成**：
```
2/1 系统校准
```

---

### **示例 3：年度结算**

**输入**：
```
事件名称：（留空）
分类标签：年度结算
日期：2025/01/01
```

**自动生成**：
```
1/1 年度结算
```

---

## 🚀 使用方法

### **方法 1：创建归零记录**

1. 进入：学生页面 → 獎金存摺 → 新增記錄
2. 选择：🔄 歸零
3. 填写：
   ```
   事件名称：（留空）← 不填写
   分类标签：学期更新 ← 从下拉选单选择
   日期：    2025/12/16
   起始金额：50
   ```
4. 提交 → 自动生成名称「12/16 学期更新」

---

### **方法 2：编辑归零记录**

1. 进入：獎金存摺 → 找到归零记录 → 点击「✏️ 編輯」
2. 清空事件名称字段
3. 选择分类标签
4. 保存 → 自动生成新名称

---

## 📋 字段说明

| 字段 | 必填 | 说明 |
|------|------|------|
| **事件名称** | ❌ 选填 | 留空则自动生成 |
| **分类标签** | ✅ 必填 | 用于生成名称 |
| **日期** | ✅ 必填 | 用于生成名称 |
| **起始金额** | ✅ 必填 | 归零后的余额 |

---

## 🎨 UI 提示

### **新增记录表单**

```
事件名稱  （選填，留空自動生成）
┌────────────────────────────────┐
│ 留空則自動生成：[日期] [分類標籤] │
└────────────────────────────────┘
💡 例如：留空會自動生成「12/16 學期更新」
```

---

### **说明提示框**

```
ℹ️ 關於歸零記錄
• 歸零後，累計獎金將從此時間點重新開始計算
• 可以設定歸零後的起始金額（實際持有的金額）
• 事件名稱可留空，系統會自動生成「日期 + 分類標籤」
• 適用於重新校準獎金金額或開始新學期
• 不會影響之前的記錄，只是改變計算起點
```

---

## 💡 为什么需要这个功能？

### **问题**
归零记录的事件名称通常很相似：
- ❌ 需要手动输入「12/16 学期更新」
- ❌ 容易出现格式不统一
- ❌ 增加用户输入负担

### **解决方案**
自动生成统一格式的名称：
- ✅ 格式统一：都是「日期 + 分类」
- ✅ 省时省力：不需要手动输入
- ✅ 可以覆盖：需要时仍可自定义

---

## 🔧 技术实现

### **前端逻辑**

```typescript
// 處理事件名稱：如果歸零類型沒有填寫，自動生成 [日期][分類標籤]
let description = formData.get('description') as string
if (transactionType === 'reset' && (!description || description.trim() === '')) {
  const category = formData.get('category') as string
  const date = transactionDate || new Date().toISOString().split('T')[0]
  
  // 格式化日期 (例如: 12/16)
  const dateObj = new Date(date)
  const dateStr = `${dateObj.getMonth() + 1}/${dateObj.getDate()}`
  
  // 生成名稱: [日期][分類標籤]
  description = `${dateStr} ${category}`
}
```

---

### **日期格式化**

| 输入日期 | 输出格式 | 说明 |
|----------|----------|------|
| `2025-12-16` | `12/16` | 月/日 |
| `2025-01-01` | `1/1` | 不补零 |
| `2025-02-28` | `2/28` | 简洁格式 |

---

## 📝 对比

### **收入/支出记录**

```
事件名称：必填 *
分类标签：必填 *
```

**原因**：收入/支出的描述多样化，不适合自动生成。

---

### **归零记录**

```
事件名称：选填  （留空自动生成）
分类标签：必填 *（用于生成名称）
```

**原因**：
- 归零记录格式固定
- 主要区别在于日期和分类
- 自动生成更方便

---

## ✅ 优势

| 优势 | 说明 |
|------|------|
| ✅ **节省时间** | 不需要手动输入事件名称 |
| ✅ **格式统一** | 所有归零记录格式一致 |
| ✅ **减少错误** | 避免格式不统一或拼写错误 |
| ✅ **灵活可控** | 需要时仍可自定义名称 |
| ✅ **简化流程** | 只需选择分类和日期 |

---

## 🎓 使用建议

### **建议留空（自动生成）的情况**

✅ 常规的学期更新  
✅ 定期的年度结算  
✅ 简单的系统校准  
✅ 标准的金额调整  

---

### **建议手动填写的情况**

✏️ 有特殊原因的归零（例如：「因疫情影响重新计算」）  
✏️ 需要详细说明的校准（例如：「与实际金额差异50元校准」）  
✏️ 重要的里程碑（例如：「升上高年级奖金制度更新」）  

---

## 📂 修改的文件

| 文件 | 说明 |
|------|------|
| `AddTransactionForm.tsx` | ✅ 新增记录表单 |
| `EditTransactionForm.tsx` | ✅ 编辑记录表单 |
| `AUTO_GENERATE_RESET_NAME.md` | ✅ 功能说明文档 |

---

## 🎉 总结

### **核心功能**
```
归零记录的事件名称可以留空
↓
系统自动生成「日期 + 分类」
↓
统一格式，省时省力
```

### **用户体验提升**
- 🚀 更快：减少输入
- 📏 更统一：格式一致
- 🎯 更简单：只需选择分类

---

🎊 **现在归零记录更简单了！** 只需选择分类和日期，事件名称会自动生成！

